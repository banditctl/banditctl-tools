#!/bin/bash

# Exit immediately on error
set -e

echo "ğŸ§ª Running pre-commit checks..."

### ğŸš ShellCheck: Shell script linting
echo "ğŸ” ShellCheck (shell scripts)"
find . -type f -name "*.sh" -exec shellcheck {} \;

### ğŸ§¼ shfmt: Shell formatting
echo "ğŸ§¼ shfmt (shell formatting)"
find . -type f -name "*.sh" -exec shfmt -i 2 -ci -d {} \;

### ğŸ“„ markdownlint: Markdown style
echo "ğŸ“„ markdownlint"
if command -v markdownlint > /dev/null; then
  find . -type f -name "*.md" -exec markdownlint {} +
else
  echo "âš ï¸  markdownlint not found â€” skipping"
fi

### ğŸ§¾ yamllint: YAML files
echo "ğŸ§¾ yamllint"
if command -v yamllint > /dev/null; then
  yamllint .
else
  echo "âš ï¸  yamllint not found â€” skipping"
fi

echo "âœ… All pre-commit checks passed!"
